{% extends 'pc_app/base.html' %}
{% block content %}
{% load custom_filters %}
{% load static %}

  <!DOCTYPE html>
  <html>
  <head>
      <title>Favorited PC Builds</title>
  </head>
  <body>
      <h2>Favorited PC Builds</h2>
      {% if favorited_builds %}
      <ul class="pc-builds-list">
          {% for build in favorited_builds %}
              <li class="pc-build">
                <img src="{% static 'images/fav_build.png' %}" width="500" height="500" style="display: inline-block;"></img>

                  <h2>{{ build.id }}</h2>
                  <table>
                    <tr>
                        <th>Component</th>
                        <th>Model</th>
                        <th>Price</th>
                    </tr>
                    <tr>
                        <td>CPU</td>
                        <td><a href="{% url 'cpu_detail' build.cpu.id %}">{{ build.cpu }}</a></td>
                        <td>RM {{build.cpu.price|convert_to_myr}}</td>
                    </tr>
                    <tr>
                        <td>GPU</td>
                        <td><a href="{% url 'gpu_detail' build.gpu.id %}">{{ build.gpu }}</a></td>
                        <td>RM {{build.gpu.price|convert_to_myr}}</td>
                    </tr>
                    <tr>
                        <td>RAM</td>
                        <td><a href="{% url 'ram_detail' build.ram.id %}">{{ build.ram }}</a></td>
                        <td>RM {{build.ram.price|convert_to_myr}}</td>
                    </tr>
                    <tr>
                        <td>Motherboard</td>
                        <td><a href="{% url 'mboard_detail' build.ram.id %}">{{ build.mboard }}</a></td>
                        <td>RM {{build.mboard.price|convert_to_myr}}</td>
                    </tr>
                    <tr>
                        <td>PSU</td>
                        <td><a href="{% url 'psu_detail' build.psu.id %}">{{ build.psu }}</a></td>
                        <td>RM {{build.psu.price|convert_to_myr}}</td>
                    </tr>
                    <tr>
                        <td>Storage</td>
                        <td><a href="{% url 'storage_detail' build.storage.id %}">{{ build.storage }}</a></td>
                        <td>RM {{build.storage.price|convert_to_myr}}</td>
                    </tr>
                    <tr>
                        <td>Chassis</td>
                        <td><a href="{% url 'case_detail' build.case.id %}">{{ build.case }}</a></td>
                        <td>RM {{build.case.price|convert_to_myr}}</td>
                    </tr>
                    <tr>
                        <th>Total Price</th>
                        <th></th>
                        <th>RM {{ build.total_price|convert_to_myr }}</th>
                    </tr>
                </table>
                  <div class="actions">
                    <form method="POST" action="{% url 'add_to_cart' build.id %}">
                      {% csrf_token %}
                      <button type="submit">Add to Cart</button>
                    </form>
          
                    <form method="POST" action="{% url 'delete_favorited_build' build.id %}">
                      {% csrf_token %}
                      <button type="submit">Unfavourite <i class="fas fa-heart-broken"></i></button>
                    </form>
                  </div>
              </li>
          {% endfor %}
      </ul>
      {% else %}
      <p>You have no favorited builds.</p>
    {% endif %}
  </body>
  </html>

<style>
h1 {
    color: #333;
}

.pc-builds-list {
    list-style: none;
    padding: 0;
    max-width: 1100px;
}

.pc-build {
    background-color: #fff;
    border: 1px solid #ccc;
    padding: 20px;
    box-shadow: 2px 2px 5px #888;
}

.pc-specs {
    list-style: none;
    padding: 0;
}

.pc-specs li {
    margin: 5px 0;
}

</style>

{% endblock %}
