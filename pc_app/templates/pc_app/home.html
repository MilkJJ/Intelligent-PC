{% extends 'pc_app/base.html' %}

{% block content %}

{% load custom_filters %}

{% if messages %}
<ul class="messages">
  {% for message in messages %}
  <p{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</p>
    {% endfor %}
</ul>
{% endif %}

{% if rated_items %}
<h3>Ratings by other users!</h3>
<ul>
  {% for item in rated_items %}
  <li>
    <strong>User:</strong> {{ item.user.username }}<br>
    <strong>Item Name:</strong> <a href="{% url 'item_detail' item.id %}">
      {% if 'amd' in item.cpu.name|lower %}
      AMD Build
      {% elif 'intel' in item.cpu.name|lower %}
      Intel Build
      {% else %}
      Other Build
      {% endif %}
    </a>

    <div class="star-rating">
      <span class="fa fa-star {% if item.latest_rating >= 1 %}checked{% endif %}"></span>
      <span class="fa fa-star {% if item.latest_rating >= 2 %}checked{% endif %}"></span>
      <span class="fa fa-star {% if item.latest_rating >= 3 %}checked{% endif %}"></span>
      <span class="fa fa-star {% if item.latest_rating >= 4 %}checked{% endif %}"></span>
      <span class="fa fa-star {% if item.latest_rating >= 5 %}checked{% endif %}"></span>
  </div>
    <strong>Total Price:</strong> {{ item.total_price|convert_to_myr }}<br>
    <strong>Rating:</strong> {{ item.latest_rating|default:"No ratings yet" }}<br>
    <strong>Comment:</strong> {{ item.latest_comment|default:"No comments yet" }}
  </li>
  <br>
  {% endfor %}
</ul>
{% else %}
<p>No rated items yet.</p>
{% endif %}

{% endblock %}