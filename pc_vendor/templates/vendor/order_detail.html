<!-- vendor/templates/vendor/order_detail.html -->
{% extends 'pc_app/base.html' %}

{% block content %}
<h1>Order Detail</h1>
<p>Order #: {{ order.id }}</p>
<p>Order Placed: {{ order.order_date }}</p>
<h4>Item Ordered</h4>
<p>CPU: {{ order.cpu }}</p>
<p>GPU: {{ order.gpu }}</p>
<p>Total Price: {{ order.total_price }}</p>
<p>Order by: {{ order.user.username }}</p>
<p>Order by: {{ order.user.profile.phone_number }}</p>
<!-- Display more order details here -->

{% if order.ready_pickup %}
<p>Status: Ready to pick up</p>

{% if order.is_completed %}
<p>Status: Completed</p>

{% else %}
<form method="POST" action="{% url 'mark_completed' order.id %}">
  {% csrf_token %}
  <button type="submit" id="complete-order-button">Mark as Completed</button>
</form>
{% endif %}


{% else %}
<p>Status: Not ready to pick up</p>
<form method="POST" action="{% url 'mark_ready_pickup' order.id %}">
  {% csrf_token %}
  <button type="submit" id="ready-pickup-button">Ready to Pick up</button>
</form>

{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var completeOrderButton = document.getElementById('complete-order-button');
    
    completeOrderButton.addEventListener('click', function (e) {
      if (!confirm('Are you sure you want to mark this order as complete?')) {
        e.preventDefault(); // Cancel the form submission
      }
    });
  });

  document.addEventListener('DOMContentLoaded', function () {
    var completeOrderButton = document.getElementById('ready-pickup-button');
    
    completeOrderButton.addEventListener('click', function (e) {
      if (!confirm('Are you sure you want to mark this order as ready to pick up?')) {
        e.preventDefault(); // Cancel the form submission
      }
    });
  });
  </script>

{% endblock %}

