{% extends 'base.html' %}

{% block title %}{{ cpu.brand }} - {{ cpu.model }}{% endblock %}

{% block content %}

    <h3>List of CPU ({{ cpu_list|length }})</h3>

    <input type="text" id="cpuSearch" onkeyup="filterCpus()" placeholder="Search CPUs...">

    <div class="col-sm-12">
      <div class="titleheader">
        <h3 class="h2header text-center">CPU</h3>
        <a href="#">See All</a>
      </div>

      <div id="cpuList"> <!-- Add id="cpuList" to the container div -->
        {% for cpu in cpus %}
        <div class="book-wrapper text-center">
          <div class="coverpage">
            <img src="https://cdn-icons-png.flaticon.com/512/984/984391.png">
          </div>
          <a href="{% url 'cpu_detail' cpu.pk %}">{{ cpu.name }}</a>
          <p> RM {{ cpu.price }}</p>
          <button class="select-button" onclick="selectComponent('cpu', '{{ cpu.id }}')">Select</button>
        </div>
        {% endfor %}
      </div>
    </div>
    
    <script>
      function filterCpus() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('cpuSearch');
        filter = input.value.toUpperCase();
        ul = document.getElementById('cpuList'); // Use the correct ID here
        li = ul.getElementsByClassName('book-wrapper'); // Change to the correct class name
        
        for (i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName('a')[0];
          txtValue = a.textContent || a.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = '';
          } else {
            li[i].style.display = 'none';
          }
        }
      }
    </script>

{% endblock %}
